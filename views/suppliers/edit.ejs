<%- include('../partials/dashboard-head') %>
    <%- include('../partials/dashboard-nav') %>


        <h3 class="text-dark mb-4" id="text-profile">Profile</h3>
        <div class="row mb-3">
            <div class="col-lg-4">
                <div class="card mb-3">
                    <div class="card-body text-center shadow"><img class="rounded-circle mb-3 mt-4"
                            src="dogs/image2.jpeg" width="160" height="160" />
                        <div class="mb-3"><button class="btn btn-primary btn-sm" type="button">Change Photo</button>
                        </div>
                    </div>
                </div>
                <div class="card shadow mb-4">
                    <div class="card-header py-3">
                        <h6 class="text-primary fw-bold m-0">Farms:</h6>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <% if (supplier.farms.length > 0) { %> 
                            <div class="farms">
                                <ul>
                                    <% supplier.farms.forEach(farm =>{ %> 
                                        <li style="margin: 8px 0;" ><%- farm.name %><form class="delete-farms" action="/suppliers/farms/<%- farm._id %>?_method=DELETE" method="POST">
                                            <button class="btn btn-primary btn-sm" type="submit" style="padding: 0px 8px 0px 8px; background-color: var(--bs-red); border: none; margin-left: 10px; ">X</button>
                                        </form></li>
                                        

                                    <% }) %> 
                                </ul>
                            </div>
                            <% } %> 

                            <form action="/suppliers/farms/add" method="POST">
                            <label class="form-label" for="farm">
                                <strong>Add farm</strong></label>
                                <input class="form-control" type="text" placeholder="Farm name:" name="name" />
                                <div class="add-farm-button">
                                    <button class="btn btn-primary btn-sm" type="submit" style="padding: 2px 20px 2px 20px;">Add</button>
                                </div>
                            </form>
                        </div>

                    </div>
                </div>
            </div>
            <div class="col-lg-8">

                <div class="row">
                    <div class="col">
                        <div class="card shadow mb-3">
                            <div class="card-header py-3">
                                <p class="text-primary m-0 fw-bold">Supplier Information</p>
                            </div>
                            <div class="card-body">
                                <form action="/suppliers/?_method=PUT" method="POST">
                                    <div class="row">
                                        <div class="col">
                                            <div class="mb-3">
                                                <label class="form-label" for="companyName">
                                                    <strong>Company Name</strong></label>
                                                <input id="companyName" class="form-control" type="text"
                                                    placeholder="Company Name" name="companyName" <%
                                                    if(supplier.companyName) {%>
                                                value="<%= supplier.companyName %>" />
                                                    <%} %>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="mb-3"><label class="form-label" for="email"><strong>Email
                                                        Address (Can't be changed)</strong></label><input id="email"
                                                    class="form-control" type="email" placeholder="<%- user.email %>"
                                                    name="email" readonly></div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <div class="mb-3">
                                                <label class="form-label"
                                                    for="first_name"><strong>Country</strong></label>
                                                <select class="form-select" name="country">
                                                    <option value="-">-</option>
                                                    <option value="Bolivia" <%=supplier.country=='Bolivia' ? 'selected'
                                                        : '' %>>Bolivia</option>
                                                    <option value="Brazil" <%=supplier.country=='Brazil' ? 'selected'
                                                        : '' %>>Brazil</option>
                                                    <option value="Colombia" <%=supplier.country=='Colombia'
                                                        ? 'selected' : '' %>>Colombia</option>
                                                    <option value="Costa Rica" <%=supplier.country=='Costa Rica'
                                                        ? 'selected' : '' %>>Costa Rica</option>
                                                    <option value="Ecuador" <%=supplier.country=='Ecuador' ? 'selected'
                                                        : '' %>>Ecuador</option>
                                                    <option value="El Salvador" <%=supplier.country=='El Salvador'
                                                        ? 'selected' : '' %>>El Salvador</option>
                                                    <option value="Guatemala" <%=supplier.country=='Guatemala'
                                                        ? 'selected' : '' %>>Guatemala</option>
                                                    <option value="Honduras" <%=supplier.country=='Honduras'
                                                        ? 'selected' : '' %>>Honduras</option>
                                                    <option value="Nicaragua" <%=supplier.country=='Nicaragua'
                                                        ? 'selected' : '' %>>Nicaragua</option>
                                                    <option value="Panama" <%=supplier.country=='Panama' ? 'selected'
                                                        : '' %>>Panama</option>
                                                    <option value="Peru" <%=supplier.country=='Peru' ? 'selected' : ''
                                                        %>>Peru</option>
                                                    <option value="Mexico" <%=supplier.country=='Mexico' ? 'selected'
                                                        : '' %>>Mexico</option>

                                                </select>

                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="mb-3"><label class="form-label" for="tax_id"><strong>Tax
                                                        Id</strong></label><input id="tax_id" class="form-control"
                                                    type="number" placeholder="Tax ID" name="taxId"
                                                    value="<%- supplier.taxId %>" />
                                            </div>

                                        </div>
                                        <div class="mb-3"><label class="form-label"
                                                for="story"><strong>Story:</strong></label><textarea
                                                class="form-control" type="text" placeholder="Your story"
                                                name="story"><%- supplier.story %> </textarea>
                                        </div>
                                        <div class="mb-3">
                                            <button class="btn btn-primary btn-sm" type="submit">Save Settings</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>


        <%- include('../partials/dashboard-footer') %>